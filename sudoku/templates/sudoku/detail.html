{% extends "base.html" %}
{% block title %}Sudoku · Juegos{% endblock %}
  {% block breadcrumbs %}
  {% include "partials/_breadcrumbs.html" %}
{% endblock %}
{% block breadcrumb_items %}
  <li class="breadcrumb-item"><a href="{% url 'core:home' %}">Inicio</a></li>
  <li class="breadcrumb-item"><a href="{% url 'sudoku:create' %}">Sudoku</a></li>
  <li class="breadcrumb-item active" aria-current="page">Detalle</li>
{% endblock %}
{% block content %}
<table class="table table-bordered text-center align-middle w-auto">
  {% for row in grid %}
  <tr>
    {% for val in row %}
      {% if val %}
      <td class="bg-light">{{ val }}</td>
      {% else %}
      <td>&nbsp;</td>
      {% endif %}
    {% endfor %}
  </tr>
  {% endfor %}
</table>
<button class="btn btn-outline-secondary my-3" type="button" data-bs-toggle="collapse" data-bs-target="#solution">Ver solución</button>
<div id="solution" class="collapse">
  <table class="table table-bordered text-center align-middle w-auto">
    {% for row in solution %}
    <tr>{% for val in row %}<td>{{ val }}</td>{% endfor %}</tr>
    {% endfor %}
  </table>
</div>
<div class="mt-3 d-flex gap-2">
  <a class="btn btn-primary" href="{% url 'sudoku:export' jg.id 'pdf' %}">Descargar PDF</a>
  <a class="btn btn-secondary" href="{% url 'sudoku:export' jg.id 'png' %}">Descargar PNG</a>
</div>
<a href="{% url 'sudoku:create' %}" class="btn btn-link mt-2">Volver</a>
   
{% block header %}
  <div class="card-header">
    <div class="card-title">Sudoku</div>
    <div>
      <a class="btn btn-sm" href="{% url 'sudoku:export' jg.id 'pdf' %}">PDF</a>
      <a class="btn btn-sm" href="{% url 'sudoku:export' jg.id 'png' %}">PNG</a>
    </div>
  </div>
{% endblock %}

{% block content %}
<div class="sudoku-board" style="grid-template-columns: repeat({{ size }}, 38px);">
  {% for row in grid %}
    {% for cell in row %}
      {% with row_i=forloop.parentloop.counter0 col_i=forloop.counter0 %}
        {% firstof cell "&nbsp;" as val %}
        <div class="sudoku-cell
          {% if row_i|divisibleby:sub_rows %}sudoku-strong-top{% endif %}
          {% if col_i|divisibleby:sub_cols %} sudoku-strong-left{% endif %}
          {% if forloop.last and col_i|add:1|divisibleby:sub_cols %} sudoku-strong-right{% endif %}
          {% if forloop.parentloop.last and row_i|add:1|divisibleby:sub_rows %} sudoku-strong-bottom{% endif %}
        ">{{ val }}</div>
      {% endwith %}
    {% endfor %}
  {% endfor %}
</div>
<form method="post" action="{% url 'sudoku:create' %}">
  {% csrf_token %}
  {% for key, val in jg.parametros.items %}
    <input type="hidden" name="{{ key }}" value="{{ val }}">
  {% endfor %}
  <button class="btn btn-primary">Duplicar</button>
</form>
 
{% endblock %}
